# Corelive - PRD

## 1. 機能仕様

### 1.1 コア機能

#### タスク管理機能

- **タスク作成**
  - テキストエディタでの自然言語入力からの自動タスク抽出
  - マニュアルタスク作成（ショートカット: Cmd/Ctrl + T）
  - Chrome Extensionからの「Read it Later」タスク追加
  - **Chrome Extensionからの関連リンク追加（新規追加）**
  - 休憩タスクの自動生成（25分作業後）
  - **合法休養タスクの自動付与（新規追加）**
  - **Copilot機能による入力補完（新規追加）**
- **タスク属性**
  - タイトル（最大100文字）
  - 説明（Markdown対応、最大5000文字）
  - 予想所要時間（5分単位）
  - 実際の所要時間（自動計測）
  - カテゴリ（BigEpic紐付け）
  - 優先度（1-5段階）
  - タグ（最大10個）
  - URL（Read it Laterタスク用）
  - **関連リンク（新規追加）**
    - URL（必須）
    - タイトル（自動取得/編集可能）
    - メモ（任意、最大500文字）
    - 追加日時（自動記録）
    - リンクタイプ（参考資料/解決策/関連記事など）

- **タスクステータス**
  - 未着手（Backlog）
  - 進行中（In Progress）
  - 完了（Completed）
  - スキップ（Skipped）
  - 延期（Postponed）

#### 表示モード切替機能（新規追加）

- **モード種別**

  ```typescript
  interface ViewModes {
    gamified: ViewMode // ゲーミフィケーションモード（デフォルト）
    traditional: ViewMode // Traditional TODOモード（新規）
    focus: ViewMode // フォーカスモード
    kanban: ViewMode // 看板モード
  }
  ```

- **Traditional TODO Mode詳細**
  - シンプルな3カラムレイアウト
  - ゲーミフィケーション要素の非表示
  - チェックボックス中心のUI
  - ミニマルなデザイン
  - プロフェッショナル向け表示
  - **特徴**：
    - 左サイドバー：プロジェクト/カテゴリナビゲーション
    - 中央：タスクリスト（Pending/Completed状態表示）
    - 右側：タスク詳細/クイック編集パネル
  - ショートカット: Cmd/Ctrl + Shift + M

#### インテリジェント入力補完機能（Copilot）（新規追加）

- **基本動作**

  ```typescript
  interface CopilotSuggestion {
    text: string // 提案テキスト
    confidence: number // 信頼度（0-1）
    source: 'history' | 'context' | 'ai' | 'pattern' // 提案ソース
    category?: string // カテゴリ
    priority: number // 表示優先度
  }
  ```

- **予測エンジン**
  - ユーザー入力履歴からの学習
  - 現在のBigEpic/プロジェクトコンテキスト理解
  - 時間帯・曜日パターン認識
  - 頻繁使用フレーズの検出
  - 関連タスクからの推論

- **UI/UX仕様**
  - 半透明グレーテキスト表示（opacity: 50-70%）
  - デバウンス時間：200ms
  - Tab/Enterキーで受け入れ
  - Escキーで却下
  - 複数候補の場合は↑↓キーで選択
  - 設定でON/OFF切替可能

- **学習とプライバシー**
  ```typescript
  interface CopilotPrivacySettings {
    enabled: boolean // Copilot機能全体のON/OFF
    localLearning: boolean // ローカル学習の有効化
    cloudSuggestions: boolean // クラウドベース提案の有効化
    dataRetentionDays: number // 学習データ保持期間
    excludedPatterns: string[] // 学習から除外するパターン
  }
  ```

#### Chrome Extension機能（拡張）

- **Read it Later機能**
  - 現在のページを新規タスクとして保存
  - タイトル自動取得
  - BigEpic選択
  - メモ追加

- **関連リンク追加機能（新規追加）**

  ```typescript
  interface RelatedLinkAddition {
    mode: 'new_task' | 'add_to_current'
    currentTask?: {
      id: string
      title: string
      status: 'In Progress'
    }
    linkData: {
      url: string
      title: string
      favicon: string
      excerpt?: string // ページから抽出した概要
      selectedText?: string // ユーザーが選択したテキスト
    }
    metadata: {
      type: 'reference' | 'solution' | 'related' | 'tool' | 'documentation'
      memo: string
      tags: string[]
      importance: 'high' | 'medium' | 'low'
    }
  }
  ```

- **自動検出機能（新規追加）**
  - 現在進行中のタスクのキーワードを含むページを検出
  - 関連性スコアの計算（0-100）
  - 関連性が高い場合（70以上）は自動提案

#### 自動タスク生成機能

- **ログインボーナスタスク**
  - タイトル：「作業体制に入る」
  - 一日の最初の起動時に自動生成・即完了
  - 通常タスクと同様にGitHub草UIに反映
  - タスク履歴に記録（フィルタリング可能）
- **休憩タスク**
  - 25分作業後に自動提案
  - 5分または15分の休憩を選択可能
  - スキップ可能（ただし連続スキップ時は警告）

- **合法休養タスク（新規追加）**
  - 連続作業日数に応じて自動付与
  - 7日連続: 「半日休養」タスク（4時間分の価値）
  - 14日連続: 「完全休養日」タスク（8時間分の価値）
  - 30日連続: 「リフレッシュ休暇」タスク（24時間分の価値）
  - 休養タスク完了時: 通常の3倍XP獲得
  - 未使用の休養タスクは累積可能（最大5つまで）

#### テキストエディタ自動TODO抽出機能（詳細追加）

- **リアルタイム抽出エンジン**

  ```typescript
  interface AutoTodoExtraction {
    patterns: {
      explicit: RegExp[] // "TODO:", "タスク:", "- [ ]" など
      implicit: RegExp[] // "〜する", "〜したい", "〜必要" など
      contextual: string[] // 文脈から判断する動詞パターン
    }

    extractionMode: 'aggressive' | 'balanced' | 'conservative'
    debounceTime: number // デフォルト: 2000ms
    minConfidence: number // 0.0 - 1.0 (デフォルト: 0.7)
  }
  ```

- **抽出プロセス**
  1. 入力テキストを2秒間隔でスキャン
  2. パターンマッチングとNLP解析を組み合わせ
  3. 信頼度スコアを計算（0.7以上で自動抽出）
  4. サイドバーの「未確定タスク」エリアに表示
  5. ワンクリックで正式タスクに変換

- **インテリジェント解析**
  - 時間表現の自動認識（「明日までに」→ デッドライン設定）
  - 人名・プロジェクト名の自動タグ付け
  - 優先度キーワードの認識（「緊急」「重要」など）
  - BigEpicとの自動紐付け（文脈解析）

#### ナビゲーション機能

- **次のタスク表示**
  - 画面上の固定位置に常時表示
  - カスタマイズ可能な表示位置（9箇所から選択）
  - 透明度調整（10-100%）
  - フォントサイズ調整（12-24px）
  - 色テーマ選択
  - **看板表示モード（新規追加）**
    - 現在着手中のタスク: 通常表示（100%不透明度）
    - その他のタスク: 薄く表示（30-50%不透明度）
    - On/Off切り替え可能

- **コンテキスト表示（新規追加）**
  - 個別タスクレベル: 「PRD詳細仕様作成」
  - プロジェクトレベル: 「クライアントA案件進行中」
  - BigEpicレベル: 「AWSからGCPへの移行作業」
  - 表示階層の切り替え: Cmd/Ctrl + Shift + N

- **タスク切り替え**
  - ワンクリックで次のタスクへ
  - ショートカット: Cmd/Ctrl + →
  - スワイプジェスチャー（モバイル）

#### ゲーミフィケーション機能

- **経験値システム**
  - タスク完了: 10-50XP（難易度による）
  - 連続達成ボーナス: +10XP/日
  - 寄り道カット: 20XP
  - 休憩タスク完了: 15XP
  - **ログインボーナス（作業開始）: 30XP**
  - **合法休養タスク完了: 通常の3倍XP**
  - **関連リンク追加: 5XP（新規追加）**
  - **表示/非表示切り替えオプション（新規追加）**

- **経験値システム表示設定（新規追加）**

  ```typescript
  interface GamificationSettings {
    showExperience: boolean // XPバー表示
    showLevel: boolean // レベル表示
    showAchievements: boolean // アチーブメント表示
    showAnimations: boolean // 完了時アニメーション
    showSounds: boolean // サウンドエフェクト
    minimalMode: boolean // プロフェッショナルモード
  }
  ```

- **レベルシステム**
  - Lv1-100（非線形成長カーブ）
  - レベルアップ時の特別エフェクト
  - マイルストーン報酬（新テーマ解放など）

- **達成記録**
  - GitHub草UIでの可視化
  - 日/週/月/年単位の統計
  - 連続記録（ストリーク）表示

### 1.2 拡張機能

#### AI機能

- **自動タスク抽出**
  - テキストからのTODO自動認識
  - 優先度の自動判定
  - 所要時間の推定
  - **関連リンクの要約生成（新規追加）**
  - **Copilot学習データの最適化（新規追加）**

- **振り返りサマリー**
  - 日次レポート生成
  - 週次/月次/年次サマリー
  - 改善提案の生成
  - **参照した関連リンクの活用度分析（新規追加）**
  - **Copilot精度の向上提案（新規追加）**

#### BigEpic管理

- **目標設定**
  - 年間目標の設定（最大5個）
  - 四半期マイルストーン
  - 進捗の可視化

- **タスク紐付け**
  - BigEpicへのタスク割り当て
  - 貢献度の計算
  - 達成率の表示

#### Lazy Tasking機能（新規追加）

- **後付けタスク登録**
  - 実行済みタスクの後からの登録
  - ショートカット: Cmd/Ctrl + Shift + T
  - 即座に「完了」ステータスで登録
- **クイック入力UI**

  ```typescript
  interface LazyTaskEntry {
    title: string
    completedAt: Date // デフォルト: 現在時刻
    duration: number // 推定作業時間
    bigEpic?: string
    tags?: string[]
    autoReward: boolean // XP自動付与
  }
  ```

- **時系列調整**
  - 完了時刻の手動調整可能
  - タイムラインビューでドラッグ＆ドロップ
  - 過去7日間まで遡及可能

- **達成感演出**
  - 通常タスク完了と同じ演出
  - 「忘れていたタスクも記録しました！」メッセージ
  - +5 XPボーナス（記録忘れ防止奨励）

#### 月次達成セレブレーション機能（新規追加）

- **トリガー条件**
  - 新しい月の初回アプリ起動時
  - 前月のタスク完了数が1つ以上

- **表示内容**

  ```typescript
  interface MonthlyAchievement {
    month: string // "2025年7月"
    totalTasks: number // 完了タスク総数
    totalXP: number // 獲得XP総数
    totalWorkHours: number // 総作業時間
    longestStreak: number // 最長連続日数
    bigEpicProgress: {
      // BigEpic別進捗
      name: string
      progress: number // パーセンテージ
    }[]
    topAchievements: Achievement[] // 主要な達成事項（最大3つ）
    monthlyRank: string // "S" | "A" | "B" | "C"
  }
  ```

- **UI/UXデザイン**
  - **全画面オーバーレイアニメーション**
    - 背景: ダークグラデーション with blurエフェクト
    - カード: Vercel Ship風の高級感のあるデザイン
    - サイズ: 600x800px（デスクトップ）、90vw x 80vh（モバイル）
  - **アニメーションシーケンス**
    ```typescript
    const celebrationSequence = {
      0: 'フェードイン開始',
      200: 'カード3D回転登場',
      500: '数値カウントアップ開始',
      1500: 'パーティクルエフェクト',
      2000: '共有ボタン表示',
      5000: '自動フェードアウト（スキップ可能）',
    }
    ```

- **達成カードデザイン**

  ```
  ┌────────────────────────────────────┐
  │         ✨ MONTHLY REPORT ✨        │
  │              2025年7月              │
  │                                    │
  │    ┌──────────────────────────┐    │
  │    │      [3Dグラフィック]      │    │
  │    │    タスク完了数: 156       │    │
  │    └──────────────────────────┘    │
  │                                    │
  │  🏆 獲得XP: 4,580                  │
  │  ⏱️ 作業時間: 124時間30分           │
  │  🔥 最長ストリーク: 14日            │
  │                                    │
  │  ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │
  │                                    │
  │  BigEpic進捗:                      │
  │  • プロダクト開発     █████████░ 85%    │
  │  • スキルアップ       ████░░░░░░ 45%    │
  │  • 健康管理          ██████░░░░ 62%    │
  │                                    │
  │  月間ランク: A                     │
  │                                    │
  │  [共有] [詳細を見る] [閉じる]      │
  └────────────────────────────────────┘
  ```

- **サウンドデザイン**

  ```typescript
  const monthlyAchievementSounds = {
    entrance: 'epic-reveal.mp3', // 壮大な登場音
    counting: 'number-tick.mp3', // 数値カウント音
    rankReveal: 'rank-fanfare.mp3', // ランク表示音
    background: 'ambient-celebration.mp3', // BGM
  }
  ```

- **共有機能**
  - **共有画像生成**
    - Next.js OG Image APIで動的生成
    - サイズ: 1200x630px（OGP標準）
    - デザイン: 達成カードのミニマル版
  - **共有先対応**
    ```typescript
    interface ShareTargets {
      twitter: {
        text: `${month}は${totalTasks}個のタスクを完了！🎉 #TaskNav #月次達成`
        url: string
        hashtags: ['TaskNav', '生産性', 'タスク管理']
      }
      instagram: {
        storyImage: string // 1080x1920px
        caption: string
      }
      bluesky: {
        text: string
        embed: {
          uri: string
          title: string
          description: string
          thumb: string
        }
      }
    }
    ```

- **データ保存**
  ```typescript
  interface MonthlyAchievementRecord {
    id: string
    userId: string
    month: string
    data: MonthlyAchievement
    viewedAt: Date
    sharedAt?: Date
    shareCount: number
  }
  ```

#### 公開ダッシュボード機能（新規追加）

- **機能概要**
  - 有料プラン（Pro Plan）限定機能
  - 個人の達成状況を公開プロフィールとして共有可能
  - プライバシー保護を最優先とした設計

- **公開URL**
  - パターン: `https://tasknav.app/@{username}`
  - カスタムスラッグ設定可能（Pro機能）
  - QRコード生成機能

- **表示可能コンテンツ**

  ```typescript
  interface PublicDashboardContent {
    // 基本情報
    username: string
    displayName?: string
    bio?: string
    avatar?: string
    joinedDate: Date

    // 統計情報（すべて公開/非公開選択可能）
    stats: {
      totalTasks?: number
      totalXP?: number
      currentLevel?: number
      currentStreak?: number
      longestStreak?: number
      totalWorkHours?: number
    }

    // GitHub草UI（公開/非公開選択可能）
    contributionGraph?: {
      data: DailyContribution[]
      yearRange: string[]
      colorScheme: string
    }

    // 月次/年次サマリー（公開/非公開選択可能）
    achievements?: {
      monthly: MonthlyAchievement[]
      yearly: YearlyAchievement[]
    }

    // BigEpic進捗（公開/非公開選択可能）
    bigEpics?: {
      name: string
      progress: number
      isPublic: boolean
    }[]

    // バッジ・称号（公開/非公開選択可能）
    badges?: {
      id: string
      name: string
      icon: string
      earnedAt: Date
    }[]
  }
  ```

- **プライバシー設定**

  ```typescript
  interface PrivacySettings {
    // マスターコントロール
    isDashboardPublic: boolean

    // 個別コントロール
    visibility: {
      stats: VisibilityLevel
      contributionGraph: VisibilityLevel
      achievements: VisibilityLevel
      bigEpics: VisibilityLevel
      badges: VisibilityLevel
      taskDetails: 'never' // タスク詳細は常に非公開
    }

    // 詳細設定
    hideWeekends: boolean
    hideInactiveDays: boolean
    blurValues: boolean // 具体的な数値をぼかす

    // アクセス制限
    allowedViewers: 'everyone' | 'link_only' | 'selected_users'
    blockedUsers: string[]
  }

  type VisibilityLevel = 'public' | 'private' | 'friends_only'
  ```

- **SEO最適化**
  - **メタデータ**
    ```typescript
    export async function generateMetadata({ params }) {
      const user = await getUser(params.username)
      return {
        title: `${user.displayName} - TaskNav Profile`,
        description: `${user.bio || 'TaskNavでの達成記録'}`,
        openGraph: {
          images: [`/api/og/profile/${params.username}`],
        },
      }
    }
    ```
  - **パフォーマンス**
    - ISR（Incremental Static Regeneration）: 60秒
    - Edge Caching
    - 画像最適化（WebP、AVIF）

- **アナリティクス**
  ```typescript
  interface DashboardAnalytics {
    views: number
    uniqueVisitors: number
    shareCount: number
    clickThroughRate: number
    topReferrers: string[]
    deviceBreakdown: {
      mobile: number
      desktop: number
      tablet: number
    }
  }
  ```

## 2. 画面設計

### 2.1 メイン画面（デスクトップ）

```
┌───────────────────────────────────────────────────────┐
│ [Logo] TaskNav          [Search] [Settings] [Profile]    │
├───────────────────────────────────────────────────────┤
│                                                          │
│  ┌───────────┐  ┌───────────────────────────────────┐ │
│  │ サイドバー │  │        テキストエディタエリア         │ │
│  │          │  │                                     │ │
│  │ ▼ Today  │  │  # 今日のタスク                    │ │
│  │   ・Task1 │  │                                     │ │
│  │   ・Task2 │  │  - [ ] PRDの詳細仕様を作成する      │ │
│  │          │  │  - [ ] UIモックアップを作成する      │ │
│  │ ▼ 未確定 │  │  - [x] 競合調査を完了する           │ │
│  │   ・買い物 │  │                                     │ │
│  │   ・メール │  │  ## メモ                           │ │
│  │          │  │  明日のミーティングで確認すること：   │ │
│  │ ▼ BigEpic│  │  - インフラ構成の最終確認           │ │
│  │   ・Epic1 │  │  - リリーススケジュール             │ │
│  │   ・Epic2 │  │                                     │ │
│  │          │  │  ※ →自動的にタスクとして認識されます │ │
│  │ ▼ Tags   │  │                                     │ │
│  │   #work  │  │  ## 関連リンク                     │ │
│  │   #personal│ │  🔎 [React最新ドキュメント] (参考資料)│ │
│  └───────────┘  │  🔎 [インフラ構成図] (解決策)       │ │
│                └───────────────────────────────────┘ │
│                                                          │
│  ┌──────────────────────────────────────────────────┐│
│  │              GitHub草UI（達成記録）                   ││
│  │  [緑の濃淡で表示される365日分のグリッド]              ││
│  └──────────────────────────────────────────────────┘│
└───────────────────────────────────────────────────────┘
```

### 2.2 Traditional TODO Mode画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│ [Logo] TaskNav     [Mode: Traditional] [Settings] [⚙]  │
├───────────────────────────────────────────────────────┤
│                                                          │
│  ┌─────────────┬────────────────┬──────────────────┐  │
│  │  Projects   │   Task List     │   Task Details    │  │
│  ├─────────────┼────────────────┼──────────────────┤  │
│  │             │                 │                   │  │
│  │ ▼ Work      │ □ PRD作成       │ Title: PRD作成    │  │
│  │   Project A │    Due: Today   │                   │  │
│  │   Project B │                 │ Description:      │  │
│  │             │ □ UIデザイン    │ 詳細な仕様書を... │  │
│  │ ▼ Personal  │    Due: Tomorrow│                   │  │
│  │   Health    │                 │ Due Date: Today   │  │
│  │   Study     │ ☑ 競合調査      │ Priority: High    │  │
│  │             │    Completed    │                   │  │
│  │ ▼ Archive   │                 │ Tags: #work #prd  │  │
│  │   2024      │ □ テスト作成    │                   │  │
│  │   2023      │    Due: Friday  │ Links: (3)        │  │
│  │             │                 │ • React Docs      │  │
│  │ [+ New]     │ [+ Add Task]    │ • Design System   │  │
│  │             │                 │                   │  │
│  └─────────────┴────────────────┴──────────────────┘  │
│                                                          │
│  Status Bar: 3 pending | 1 completed today | Streak: 7  │
└───────────────────────────────────────────────────────┘
```

### 2.3 Copilot入力補完UI（新規追加）

```
┌────────────────────────────────────────────────────────┐
│  タスク入力エリア（Copilot有効時）                        │
├────────────────────────────────────────────────────────┤
│                                                          │
│  新しいタスクを入力...                                    │
│                                                          │
│  > PRDの詳細仕様を┃作成する                              │
│                   └─ 半透明グレーテキスト（opacity: 60%） │
│                      Tabキーで受け入れ                    │
│                                                          │
│  候補リスト（複数候補がある場合）:                          │
│  ┌────────────────────────────────────────────────┐    │
│  │ 1. 作成する                    [History] 85%    │    │
│  │ 2. レビューする                [Context] 72%    │    │
│  │ 3. 確認して修正する            [AI] 65%         │    │
│  └────────────────────────────────────────────────┘    │
│  ↑↓ で選択 | Tab/Enter で確定 | Esc でキャンセル         │
│                                                          │
└────────────────────────────────────────────────────────┘
```

### 2.4 タスク詳細画面（拡張）

```
┌───────────────────────────────────────────────────────┐
│                  タスク詳細                              │
├───────────────────────────────────────────────────────┤
│  タイトル: PRDの詳細仕様を作成する                       │
│  ステータス: 進行中 🔄                                   │
│  予想時間: 2時間 | 経過時間: 45分                       │
│                                                          │
│  ## 説明                                                 │
│  ゲーミフィケーション要素とUI仕様を含む                  │
│  詳細なPRDを作成する                                     │
│                                                          │
│  ## 関連リンク (3)                                       │
│  ┌─────────────────────────────────────────────────┐  │
│  │ 🔎 React最新ドキュメント                          │  │
│  │    タイプ: 参考資料 | 追加: 2時間前              │  │
│  │    メモ: Hooks APIの部分を特に参照               │  │
│  │    [開く] [編集] [削除]                         │  │
│  ├─────────────────────────────────────────────────┤  │
│  │ 🔎 競合サービスUIパターン集                      │  │
│  │    タイプ: 参考資料 | 追加: 昨日                 │  │
│  │    メモ: ナビゲーションUIの参考に               │  │
│  │    [開く] [編集] [削除]                         │  │
│  ├─────────────────────────────────────────────────┤  │
│  │ 🔎 インフラコスト計算ツール                      │  │
│  │    タイプ: ツール | 追加: 3日前                  │  │
│  │    メモ: Vercelの料金計算に使用                  │  │
│  │    [開く] [編集] [削除]                         │  │
│  └─────────────────────────────────────────────────┘  │
│                                                          │
│  [+ リンク追加] [タスク編集] [完了]                     │
└───────────────────────────────────────────────────────┘
```

### 2.5 カレンダーUI振り返り画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│                    振り返りビュー                        │
├───────────────────────────────────────────────────────┤
│  ┌───────────────┐  ┌─────────────────────────────┐│
│  │   2025年7月    │  │        AI振り返りサマリー        ││
│  │ 日 月 火 水 木 金 土│  │                                ││
│  │     1  2  3  4  5│  │  7月14日の振り返り              ││
│  │  6  7  8  9 10 11│  │  ━━━━━━━━━━━━━━━━━━━━━━    ││
│  │ 13 [14] 15 16 17│  │                                ││
│  │ 20 21 22 23 24 25│  │  🎯 完了タスク: 12個            ││
│  │ 27 28 29 30 31   │  │  ⏱️ 作業時間: 6時間25分          ││
│  │                  │  │  🏆 獲得XP: 450                 ││
│  ├──────────────────┤  │  🔎 参照リンク: 8個              ││
│  │ [日] [週] [月] [年]│  │                                ││
│  └──────────────────┘  │  ## 主な成果                    ││
│                      │  - PRD詳細仕様を完成させました   ││
│                      │  - UIモックアップ3案を作成        ││
│                      │  - 競合分析レポートを提出         ││
│                      │                                ││
│                      │  ## AI分析                      ││
│                      │  午前中の生産性が特に高く、      ││
│                      │  複雑なタスクを効率的に          ││
│                      │  処理できています。              ││
│                      │                                ││
│                      │  ## 有用だった関連リンク         ││
│                      │  1. React Hooks ドキュメント     ││
│                      │  2. インフラコスト計算ツール      ││
│                      │                                ││
│                      │  [📊 詳細統計] [🔥 エクスポート]  ││
│                      └─────────────────────────────┘│
└───────────────────────────────────────────────────────┘
```

### 2.6 ノードグラフビュー（新規追加）

```
┌───────────────────────────────────────────────────────┐
│                 タスク達成ノードグラフ                   │
├───────────────────────────────────────────────────────┤
│                                                          │
│     BigEpic: プロダクト開発                              │
│         ◉━━━━━━━━━━━━━━━━━━━━━━━━━━━━━◉ 75%          │
│        /│\                            /│\              │
│       / │ \                          / │ \             │
│    ◉    ◉   ◉                     ◉    ◉   ◉          │
│   PRD  UI  競合分析            テスト 実装  デプロイ     │
│   100% 80%  100%               20%   60%   0%          │
│    │    │    │                  │     │    │          │
│    ◉    ◉    ◉                  ◉     ◉    ○          │
│  詳細  Mock  レポート          単体   API   -          │
│   🔎5   🔎3   🔎8              🔎1   🔎2              │
│                                                         │
│  [ズーム: 50%] [フィルタ: 今月] [表示: BigEpic別]      │
│                                                         │
│  凡例: ◉ 完了  ◉ 進行中  ○ 未着手                     │
│        線の太さ = タスクの重要度                        │
│        🔎 = 関連リンク数                               │
└───────────────────────────────────────────────────────┘
```

### 2.7 オンボーディング画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│                  TaskNavへようこそ (1/5)               │
├───────────────────────────────────────────────────────┤
│                                                          │
│              🎮 ゲーム感覚のタスク管理                   │
│                                                          │
│    TaskNavは「次の目的地」を常に表示することで、           │
│    ゲームのようなナビゲーション体験を提供します          │
│                                                          │
│                    [画面デモ表示]                        │
│         ┌─────────────────────┐                       │
│         │ 次: PRD詳細仕様作成  │ ← いつでも表示         │
│         │ 予想: 25分          │                        │
│         └─────────────────────┘                       │
│                                                          │
│                                        [次へ →]          │
└───────────────────────────────────────────────────────┘

┌───────────────────────────────────────────────────────┐
│                  必須ショートカット (3/5)               │
├───────────────────────────────────────────────────────┤
│                                                          │
│           ⌨️ これだけは覚えてください！                   │
│                                                          │
│   Cmd/Ctrl + N : ナビゲーター表示/非表示 🎯             │
│   Cmd/Ctrl + → : 次のタスクへ ➡️                       │
│   Cmd/Ctrl + T : 新規タスク作成 ✨                     │
│   Cmd/Ctrl + L : 関連リンク追加 🔎                     │
│                                                          │
│   💡 ヒント: ナビゲーターが邪魔な時は                   │
│      Cmd+N で瞬時に隠せます！                          │
│                                                          │
│                [練習する] [スキップ] [次へ →]           │
└───────────────────────────────────────────────────────┘
```

### 2.8 フローティングナビゲーター（拡張）

```
┌─────────────────────┐
│ 次: PRD詳細仕様作成  │
│ 予想: 25分          │
│ 🔎 関連リンク: 3    │
│ [開始] [スキップ]   │
└─────────────────────┘
```

**表示モード**：

- コンパクトモード（タイトルのみ）
- 標準モード（タイトル＋時間）
- 詳細モード（タイトル＋時間＋説明＋関連リンク数）
- **コンテキストモード（新規追加）**

#### コンテキスト表示モード（新規追加）

```
┌──────────────────────────┐
│ 📂 クライアントA案件      │ ← BigEpic/プロジェクト
│ ├─ PRD詳細仕様作成 (今)  │ ← 現在のタスク（強調表示）
│ ├─ UIモックアップ作成     │ ← 次のタスク（薄く表示）
│ └─ テスト仕様書作成       │ ← その先のタスク（薄く表示）
│                          │
│ 進捗: ███████░░░ 45%      │
│ [フォーカス] [詳細]      │
└──────────────────────────┘
```

#### 看板表示モード（新規追加）

```typescript
interface KanbanDisplayMode {
  enabled: boolean;
  currentTaskOpacity: 100;      // 現在のタスク: 100%
  upcomingTaskOpacity: 40;      // 次のタスク: 40%
  futureTaskOpacity: 20;        // それ以降: 20%

  // 表示するタスク数
  visibleTaskCount: 3 | 5 | 7;

  // アニメーション設定
  transitionDuration: 300;      // ms
  fadeInOut: boolean;

  // 自動切り替え
  autoAdvance: boolean;
  autoAdvanceDelay: 25 * 60;   // 25分（ポモドーロ）
}
```

#### 階層表示設定（新規追加）

```typescript
interface HierarchyDisplay {
  level: 'task' | 'project' | 'bigepic'
  showContext: boolean

  // プロジェクトレベル表示例
  projectView: {
    title: string // "AWSからGCPへの移行"
    currentPhase: string // "インフラ設計フェーズ"
    tasksInPhase: number // 12
    completedInPhase: number // 5
    estimatedHours: number // 40
  }

  // BigEpicレベル表示例
  bigEpicView: {
    title: string // "プロダクト開発 2025 Q1"
    projects: string[] // ["クライアントA", "社内ツール", ...]
    overallProgress: number // 65%
    deadline?: Date
  }
}
```

### 2.9 メニューバーアプリ（macOS）

```
┌───────────────────┐
│ 🔋 PRD詳細仕様... │
│ ⏱️ 25分          │
│ 🔎 関連リンク: 3  │
│ ─────────────────── │
│ ▶️ タスク開始     │
│ ⭐️ 次のタスクへ   │
│ ✅ 完了          │
│ 🔎 リンク追加      │
│ ─────────────────── │
│ 🎯 今日: 5/8完了 │
│ 🔥 7日連続達成中  │
└───────────────────┘
```

### 2.10 Chrome Extension（拡張）

```
┌─────────────────────────────────┐
│ TaskNav - Chrome Extension     │
├─────────────────────────────────┤
│                                │
│ 現在のページをどうしますか？    │
│                                │
│ ┌──────────────────────────┐ │
│ │ 🎯 現在のタスクに追加         │ │
│ │                            │ │
│ │ タスク: PRD詳細仕様作成     │ │
│ │ 関連リンク数: 3 → 4         │ │
│ │                            │ │
│ │ [このオプションを選択]       │ │
│ └──────────────────────────┘ │
│                                │
│ ┌──────────────────────────┐ │
│ │ 📌 新規タスクとして保存      │ │
│ │                            │ │
│ │ Read it Laterタスクを作成   │ │
│ │                            │ │
│ │ [このオプションを選択]       │ │
│ └──────────────────────────┘ │
│                                │
│ 関連性スコア: 85% 🔥           │
│ （タスクとの関連性が高いです）  │
└─────────────────────────────────┘
```

#### 関連リンク追加フォーム（Chrome Extension）

```
┌─────────────────────────────────┐
│ 現在のタスクに追加              │
├─────────────────────────────────┤
│ URL:                           │
│ [自動取得済み]                 │
│                                │
│ タイトル:                      │
│ [React Hooks ドキュメント]     │
│                                │
│ リンクタイプ:                  │
│ [▼ 参考資料        ]          │
│  ・参考資料                    │
│  ・解決策                      │
│  ・関連記事                    │
│  ・ツール                      │
│  ・ドキュメント                │
│                                │
│ メモ（任意）:                  │
│ [useEffectの使い方を_____]     │
│ [確認するため__________]       │
│                                │
│ 重要度:                        │
│ ◉ 高 ○ 中 ○ 低               │
│                                │
│ 選択したテキスト:              │
│ "useEffect accepts a function" │
│                                │
│ [キャンセル] [追加 (+5 XP)]    │
└─────────────────────────────────┘
```

### 2.11 モバイル画面（React Native）

#### ホーム画面（拡張）

```
┌─────────────────┐
│ 📱 Status Bar   │
├─────────────────┤
│                 │
│  今日のタスク    │
│  ━━━━━━━━━    │
│                 │
│ ▢ Task 1        │
│   🔎 2          │
│ ▢ Task 2        │
│   🔎 0          │
│ ✓ Task 3        │
│   🔎 5          │
│ ▢ Task 4        │
│   🔎 1          │
│                 │
│ [+] 新規タスク   │
│                 │
├─────────────────┤
│ 📊 統計 | 📝 作成│
└─────────────────┘
```

### 2.12 月次達成画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│                                                          │
│                    [暗転フェードイン]                     │
│                                                          │
│     ┌──────────────────────────────────────────┐      │
│     │                                            │      │
│     │          ✨ MONTHLY ACHIEVEMENT ✨          │      │
│     │                2025年7月                    │      │
│     │                                            │      │
│     │    ┌────────────────────────────────┐     │      │
│     │    │                                │     │      │
│     │    │     [3Dアニメーショングラフ]     │     │      │
│     │    │                                │     │      │
│     │    └────────────────────────────────┘     │      │
│     │                                            │      │
│     │         完了タスク: 156 🎯                 │      │
│     │         獲得XP: 4,580 ⚡                  │      │
│     │         作業時間: 124時間30分 ⏱️           │      │
│     │         最長ストリーク: 14日 🔥            │      │
│     │                                            │      │
│     │    ━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━━    │      │
│     │                                            │      │
│     │         BigEpic達成度                      │      │
│     │                                            │      │
│     │    プロダクト開発  ██████████░░░░ 85%         │      │
│     │    スキルアップ    ████░░░░░░░░ 45%         │      │
│     │    健康管理       ██████░░░░░░ 62%         │      │
│     │                                            │      │
│     │         月間ランク: A 🏆                   │      │
│     │                                            │      │
│     │    ─────────────────────────────────────      │      │
│     │                                            │      │
│     │    [🔤 共有する] [📊 詳細] [✕ 閉じる]    │      │
│     │                                            │      │
│     └──────────────────────────────────────────┘      │
│                                                          │
│              [パーティクルエフェクト表示]                 │
│                                                          │
└───────────────────────────────────────────────────────┘
```

### 2.13 公開ダッシュボード画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│  https://tasknav.app/@username                          │
├───────────────────────────────────────────────────────┤
│                                                          │
│     ┌─────────────────────────────────────────┐     │
│     │          @username's TaskNav Profile         │     │
│     │                                             │     │
│     │  ┌──────────┐  ━━━━━━━━━━━━━━━━━━━━━━━━   │     │
│     │  │ Avatar  │   山田太郎                     │     │
│     │  │  Image  │   タスク管理で人生を変える      │     │
│     │  └──────────┘   Since: 2025年1月            │     │
│     │                                             │     │
│     └─────────────────────────────────────────┘     │
│                                                          │
│  ┌──────────────────────────────────────────────────┐│
│  │                  📊 統計情報                         ││
│  │                                                      ││
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐      ││
│  │  │   1,542    │  │  45,820   │  │    Lv.42   │      ││
│  │  │ 完了タスク  │  │  獲得XP    │  │   レベル    │      ││
│  │  └──────────┘  └──────────┘  └──────────┘      ││
│  │                                                      ││
│  │  ┌──────────┐  ┌──────────┐  ┌──────────┐      ││
│  │  │    28日    │  │   142日    │  │ 3,245時間  │      ││
│  │  │現在ストリーク│  │最長ストリーク│  │ 総作業時間  │      ││
│  │  └──────────┘  └──────────┘  └──────────┘      ││
│  └──────────────────────────────────────────────────┘│
│                                                          │
│  ┌──────────────────────────────────────────────────┐│
│  │               🌱 GitHub草UI（2025年）                 ││
│  │                                                      ││
│  │  [緑の濃淡で表示される365日分のコントリビューション]   ││
│  │                                                      ││
│  │  凡例: □ 0 ▪ 1-5 ▪ 6-10 ▪ 11-15 ▪ 16+             ││
│  └──────────────────────────────────────────────────┘│
│                                                          │
│  ┌──────────────────────────────────────────────────┐│
│  │                 🎯 BigEpic進捗                        ││
│  │                                                      ││
│  │  プロダクト開発    ████████████████░░░░ 75%             ││
│  │  スキル向上       ████████░░░░░░░░░░░░ 40%             ││
│  │  健康管理         ███████████░░░░░░░░░ 55%             ││
│  │                                                      ││
│  └──────────────────────────────────────────────────┘│
│                                                          │
│  ┌──────────────────────────────────────────────────┐│
│  │                  🏆 獲得バッジ                        ││
│  │                                                      ││
│  │  🔥 炎の継続者   🌟 月間MVP    🚀 スピードスター      ││
│  │  💎 1000タスク   🌈 BigEpic達成  🎯 精密射手         ││
│  │                                                      ││
│  └──────────────────────────────────────────────────┘│
│                                                          │
│              [🔗 プロフィールをシェア]                    │
│                                                          │
└───────────────────────────────────────────────────────┘
```

### 2.14 公開ダッシュボード設定画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│              公開ダッシュボード設定                      │
├───────────────────────────────────────────────────────┤
│                                                          │
│  公開URL設定                                             │
│  ┌─────────────────────────────────────────────────┐   │
│  │ https://tasknav.app/@[username_____]            │   │
│  │                                                  │   │
│  │ ⚠️ 一度設定したユーザー名は変更できません          │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  マスター設定                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 🔒 ダッシュボードを公開する         [ON] OFF     │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  公開範囲設定                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 基本情報（名前、Bio）              ◉ 公開       │   │
│  │                                   ○ 非公開     │   │
│  │                                                  │   │
│  │ 統計情報                          ◉ 公開       │   │
│  │ └ 具体的な数値を表示              ◉ いいえ       │   │
│  │                                   ○ はい       │   │
│  │                                                  │   │
│  │ GitHub草UI                        ◉ 公開       │   │
│  │ └ 週末を非表示                    ◉ いいえ       │   │
│  │                                   ○ はい       │   │
│  │                                                  │   │
│  │ BigEpic進捗                       ○ 公開       │   │
│  │                                   ◉ 非公開     │   │
│  │                                                  │   │
│  │ 獲得バッジ                        ◉ 公開       │   │
│  │                                   ○ 非公開     │   │
│  │                                                  │   │
│  │ 月次/年次達成                     ○ 公開       │   │
│  │                                   ◉ 非公開     │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  アクセス制限                                            │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 閲覧可能な人:                                     │   │
│  │ ◉ 全員                                           │   │
│  │ ○ リンクを知っている人のみ                        │   │
│  │ ○ 選択したユーザーのみ                           │   │
│  │                                                  │   │
│  │ ブロックリスト: [ユーザー追加...]                 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  プレビュー                                              │
│  ┌─────────────────────────────────────────────────┐   │
│  │ [公開ダッシュボードのプレビュー表示]              │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  プロフィール設定                                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │ プロフィールの公開設定                          │   │
│  │ プロフィールの表示設定                          │   │
│  │ バッジの公開設定                                │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│                    [キャンセル] [設定を保存]              │
└───────────────────────────────────────────────────────┘
```

### 2.15 Lazy Tasking画面（新規追加）

#### クイック入力モーダル

```
┌───────────────────────────────────────────────────────┐
│              💭 タスクを後から記録                       │
├───────────────────────────────────────────────────────┤
│                                                          │
│  何をしましたか？                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │ メールの返信対応                                  │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  いつ完了しましたか？                                    │
│  [10分前 ▼] [15分前] [30分前] [1時間前] [カスタム...]   │
│                                                          │
│  どのくらい時間がかかりましたか？                        │
│  [5分] [10分] [15分] [25分] [30分] [45分] [1時間]       │
│                                                          │
│  カテゴリー（任意）                                      │
│  [▼ BigEpicを選択...]                                  │
│                                                          │
│  タグ（任意）                                            │
│  [#仕事] [#メール] [+ タグ追加]                         │
│                                                          │
│  ✨ このタスクを記録すると +15 XP 獲得！                 │
│                                                          │
│                    [キャンセル] [記録する 🎉]            │
└───────────────────────────────────────────────────────┘
```

#### タイムライン調整ビュー

```
┌───────────────────────────────────────────────────────┐
│                  📅 今日のタイムライン                   │
├───────────────────────────────────────────────────────┤
│                                                          │
│  9:00 ─┬─ ログインボーナス ✓                           │
│        │                                                │
│  9:30 ─┼─ PRD作成開始 ✓                                │
│        │                                                │
│ 10:00 ─┼─ [空き時間]                                   │
│        │   ↓ ここにドラッグ＆ドロップ                  │
│ 10:30 ─┼─ UI設計 ✓                                     │
│        │                                                │
│ 11:00 ─┼─ 📧 メール返信（後から追加） ← ドラッグ可能   │
│        │                                                │
│ 11:30 ─┼─ ミーティング ✓                               │
│        │                                                │
│                                                          │
│  [+ 忘れたタスクを追加]                                  │
└───────────────────────────────────────────────────────┘
```

#### Lazy Taskingショートカットバー（常時表示オプション）

```
┌───────────────────────┐
│ 💭 今終わったタスクを記録... │
└───────────────────────┘
```

ホットキー: Cmd/Ctrl + Shift + T で即座に開く

### 2.16 テーマ設定画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│                   🎨 テーマ設定                          │
├───────────────────────────────────────────────────────┤
│                                                          │
│  現在のテーマ: Tokyo Night                               │
│                                                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │              プレビューエリア                      │   │
│  │  [実際のUIがリアルタイムプレビュー表示]            │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  カテゴリー選択                                          │
│  [ダーク] [ライト] [グラデーション] [レトロ] [季節]      │
│                                                          │
│  ダークテーマ (30種)                                     │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐               │
│  │    │ │    │ │    │ │    │ │    │               │
│  │ 🌙 │ │ 🌊 │ │ 💜 │ │ ⚫ │ │ 🌃 │               │
│  │    │ │    │ │    │ │    │ │    │               │
│  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘               │
│  Midnight  Deep   Shadow  Carbon  Tokyo               │
│   Blue    Ocean  Purple   Black   Night               │
│                                                          │
│  ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐ ┌─────┐               │
│  │    │ │    │ │    │ │    │ │ More│               │
│  │ 🧛 │ │ 🎭 │ │ 🌌 │ │ 🦇 │ │ ... │               │
│  │    │ │    │ │    │ │    │ │     │               │
│  └─────┘ └─────┘ └─────┘ └─────┘ └─────┘               │
│  Dracula  Nord   Space   Batman   +20                 │
│           Dark   Gray                                 │
│                                                          │
│  お気に入り ⭐                                           │
│  [Tokyo Night] [Synthwave] [Ocean Wave]                 │
│                                                          │
│  カスタムテーマ作成 (Pro) 🎨                            │
│  [+ 新規作成]                                           │
│                                                          │
│  テーマ同期設定                                          │
│  ☑️ すべてのデバイスで同期                              │
│  ☑️ 時間帯で自動切り替え（日中:ライト/夜:ダーク）      │
│                                                          │
│                        [キャンセル] [適用]               │
└───────────────────────────────────────────────────────┘
```

### テーマプレビューカード詳細

```
┌──────────────────┐
│  🌃 Tokyo Night     │
│                    │
│  [プレビュー画像]   │
│  ████████████      │
│  ████████████      │
│  ████████████      │
│                    │
│  作者: TaskNav Team │
│  人気: ⭐⭐⭐⭐⭐   │
│  使用者: 1,234人    │
│                    │
│  [プレビュー] [選択]│
└──────────────────┘
```

### 2.17 Copilot設定画面（新規追加）

```
┌───────────────────────────────────────────────────────┐
│              🤖 Copilot機能設定                         │
├───────────────────────────────────────────────────────┤
│                                                          │
│  基本設定                                                │
│  ┌─────────────────────────────────────────────────┐   │
│  │ Copilot機能を有効にする              [ON] OFF   │   │
│  │                                                  │   │
│  │ 提案の表示方法:                                  │   │
│  │ ◉ 半透明テキスト（インライン）                    │   │
│  │ ○ ドロップダウンリスト                          │   │
│  │ ○ ポップアップウィンドウ                        │   │
│  │                                                  │   │
│  │ 提案の透明度: [▓▓▓▓▓░░░░░] 60%                │   │
│  │                                                  │   │
│  │ デバウンス時間: [▼ 200ms]                      │   │
│  │   100ms | 200ms | 300ms | 500ms                 │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  学習設定                                                │
│  ┌─────────────────────────────────────────────────┐   │
│  │ ローカル学習:                                    │   │
│  │ ☑️ 入力履歴から学習する                          │   │
│  │ ☑️ プロジェクトコンテキストを考慮                │   │
│  │ ☑️ 時間帯パターンを記憶                          │   │
│  │                                                  │   │
│  │ クラウド提案:                                    │   │
│  │ ☑️ より精度の高い提案を取得（Pro機能）            │   │
│  │                                                  │   │
│  │ 学習データ保持期間: [▼ 30日]                   │   │
│  │   7日 | 30日 | 90日 | 無期限                    │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  プライバシー設定                                        │
│  ┌─────────────────────────────────────────────────┐   │
│  │ 除外パターン:                                    │   │
│  │ [パスワード] [個人情報] [+ 追加]                 │   │
│  │                                                  │   │
│  │ ☐ 匿名化してから送信                            │   │
│  │ ☐ 企業名・人名を自動マスク                      │   │
│  │                                                  │   │
│  │ データエクスポート: [学習データをダウンロード]    │   │
│  │ データ削除: [全ての学習データを削除]            │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│  ショートカット                                          │
│  ┌─────────────────────────────────────────────────┐   │
│  │ Tab/Enter : 提案を受け入れ                      │   │
│  │ Esc       : 提案を却下                          │   │
│  │ ↑↓        : 複数候補から選択                    │   │
│  │ Cmd/Ctrl+Space : 手動で提案を表示               │   │
│  └─────────────────────────────────────────────────┘   │
│                                                          │
│                    [リセット] [保存]                     │
└───────────────────────────────────────────────────────┘
```

## 3. UIコンポーネント仕様

### 3.1 カラーパレット

#### ベーステーマ（無料）

```css
--primary: #6366f1; /* Indigo */
--secondary: #8b5cf6; /* Purple */
--success: #10b981; /* Green */
--warning: #f59e0b; /* Amber */
--danger: #ef4444; /* Red */
--background: #0f0f0f; /* Dark */
--surface: #1a1a1a; /* Dark Gray */
--text-primary: #ffffff; /* White */
--text-secondary: #a3a3a3; /* Gray */
--link-accent: #3b82f6; /* Blue - 関連リンク用（新規追加） */
--copilot-suggestion: rgba(163, 163, 163, 0.6); /* Copilot提案用（新規追加） */
```

#### カラーテーマ

The design system supports two core themes:

```typescript
interface ColorThemes {
  light: {
    name: 'Light'
    description: 'Clean and minimal light theme'
    colorScheme: 'light'
  }
  dark: {
    name: 'Dark'
    description: 'Modern dark theme'
    colorScheme: 'dark'
  }
}
```

Both themes support system preference detection via `prefers-color-scheme` media query.

### 3.2 アニメーション仕様

#### タスク完了エフェクト

```javascript
// Confetti設定
const confettiConfig = {
  particleCount: 100,
  spread: 70,
  origin: { y: 0.6 },
  colors: ['#6366f1', '#8b5cf6', '#10b981'],
  duration: 3000,
}

// ログインボーナス専用エフェクト
const loginBonusConfig = {
  particleCount: 150,
  spread: 90,
  origin: { y: 0.5 },
  colors: ['#fbbf24', '#f59e0b', '#f97316'], // ゴールド系
  duration: 4000,
  gravity: 0.8,
}

// 合法休養タスク完了エフェクト（新規追加）
const legalRestConfig = {
  particleCount: 200,
  spread: 120,
  origin: { y: 0.4 },
  colors: ['#34d399', '#10b981', '#059669'], // グリーン系
  duration: 5000,
  gravity: 0.5,
  scalar: 1.2,
}

// 関連リンク追加エフェクト（新規追加）
const linkAddedConfig = {
  particleCount: 50,
  spread: 40,
  origin: { y: 0.7 },
  colors: ['#3b82f6', '#60a5fa', '#93c5fd'], // ブルー系
  duration: 2000,
  gravity: 1.0,
}

// 月次達成エフェクト（新規追加）
const monthlyAchievementConfig = {
  particleCount: 300,
  spread: 180,
  origin: { x: 0.5, y: 0.5 },
  colors: ['#6366f1', '#8b5cf6', '#ec4899', '#f59e0b'],
  duration: 6000,
  gravity: 0.3,
  scalar: 1.5,
  ticks: 200,
}

// Copilot提案アニメーション（新規追加）
const copilotSuggestionConfig = {
  fadeInDuration: 200,
  fadeOutDuration: 150,
  typewriterSpeed: 50, // ms per character
  opacity: {
    initial: 0,
    hover: 0.8,
    default: 0.6,
  },
}

// サウンドエフェクト
const sounds = {
  taskComplete: 'coin-collect.mp3',
  levelUp: 'fanfare.mp3',
  streakContinue: 'combo.mp3',
  loginBonus: 'morning-chime.mp3',
  legalRest: 'healing-bell.mp3',
  linkAdded: 'paper-attach.mp3',
  monthlyReveal: 'epic-reveal.mp3', // 新規追加
  monthlyCountUp: 'number-tick.mp3', // 新規追加
  monthlyRankReveal: 'rank-fanfare.mp3', // 新規追加
  monthlyBGM: 'ambient-celebration.mp3', // 新規追加
  copilotSuggest: 'soft-ping.mp3', // 新規追加
  copilotAccept: 'type-sound.mp3', // 新規追加
  modeSwitch: 'switch-sound.mp3', // 新規追加
}
```

#### トランジション

```css
/* タスクカードのホバー */
.task-card {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.task-card:hover {
  transform: translateY(-2px);
  box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
}

/* レベルアップアニメーション */
@keyframes levelUp {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  50% {
    transform: scale(1.2);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

/* 関連リンク追加アニメーション（新規追加） */
@keyframes linkAttach {
  0% {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
  }
  50% {
    transform: scale(1.1) rotate(10deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

/* 月次達成カード登場アニメーション（新規追加） */
@keyframes monthlyCardReveal {
  0% {
    transform: rotateY(-90deg) scale(0.8);
    opacity: 0;
  }
  50% {
    transform: rotateY(-20deg) scale(1.05);
    opacity: 0.8;
  }
  100% {
    transform: rotateY(0deg) scale(1);
    opacity: 1;
  }
}

/* 数値カウントアップ（新規追加） */
@keyframes countUp {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Copilot提案フェードイン（新規追加） */
@keyframes copilotFadeIn {
  0% {
    opacity: 0;
    transform: translateX(-10px);
  }
  100% {
    opacity: 0.6;
    transform: translateX(0);
  }
}

/* モード切り替えトランジション（新規追加） */
@keyframes modeTransition {
  0% {
    opacity: 1;
    filter: blur(0px);
  }
  50% {
    opacity: 0.5;
    filter: blur(5px);
  }
  100% {
    opacity: 1;
    filter: blur(0px);
  }
}
```

### 3.3 タイポグラフィ

```css
/* フォントファミリー */
--font-primary: 'Inter', -apple-system, BlinkMacSystemFont, sans-serif;
--font-mono: 'JetBrains Mono', 'Courier New', monospace;
--font-display: 'Outfit', 'Inter', sans-serif; /* 月次達成用（新規追加） */
--font-traditional:
  'SF Pro Text', 'Segoe UI', sans-serif; /* Traditional Mode用（新規追加） */

/* フォントサイズ */
--text-xs: 0.75rem; /* 12px */
--text-sm: 0.875rem; /* 14px */
--text-base: 1rem; /* 16px */
--text-lg: 1.125rem; /* 18px */
--text-xl: 1.25rem; /* 20px */
--text-2xl: 1.5rem; /* 24px */
--text-3xl: 1.875rem; /* 30px - 月次達成用（新規追加） */
--text-4xl: 2.25rem; /* 36px - 月次達成用（新規追加） */
```

## 4. インタラクション設計

### 4.1 キーボードショートカット

| アクション               | Windows/Linux        | macOS               |
| ------------------------ | -------------------- | ------------------- |
| 新規タスク               | Ctrl + T             | Cmd + T             |
| タスク完了               | Ctrl + Enter         | Cmd + Enter         |
| 次のタスク               | Ctrl + →             | Cmd + →             |
| 前のタスク               | Ctrl + ←             | Cmd + ←             |
| フォーカスモード         | Ctrl + F             | Cmd + F             |
| **ナビゲーター表示切替** | **Ctrl + N**         | **Cmd + N**         |
| 検索                     | Ctrl + K             | Cmd + K             |
| 振り返りビュー           | Ctrl + R             | Cmd + R             |
| **関連リンク追加**       | **Ctrl + L**         | **Cmd + L**         |
| **月次達成表示**         | **Ctrl + M**         | **Cmd + M**         |
| **ダッシュボード設定**   | **Ctrl + ,**         | **Cmd + ,**         |
| **Lazy Task記録**        | **Ctrl + Shift + T** | **Cmd + Shift + T** |
| **コンテキスト切替**     | **Ctrl + Shift + N** | **Cmd + Shift + N** |
| **看板モード切替**       | **Ctrl + Shift + K** | **Cmd + Shift + K** |
| **テーマ切替**           | **Ctrl + Shift + ,** | **Cmd + Shift + ,** |
| **表示モード切替**       | **Ctrl + Shift + M** | **Cmd + Shift + M** |
| **Copilot手動起動**      | **Ctrl + Space**     | **Cmd + Space**     |
| **Copilot受け入れ**      | **Tab / Enter**      | **Tab / Enter**     |
| **Copilot却下**          | **Esc**              | **Esc**             |

### 4.2 ドラッグ&ドロップ

- タスクの順序変更
- BigEpicへのタスク割り当て
- タグの追加（タグエリアへドロップ）
- **未確定タスクから正式タスクへの変換（新規追加）**
- **関連リンクの並び替え（新規追加）**
- **関連リンクのタスク間移動（新規追加）**
- **Traditional Modeでのカテゴリ間移動（新規追加）**

### 4.3 コンテキストメニュー

タスクを右クリック時：

- 編集
- 複製
- 削除
- BigEpicに割り当て
- タグを追加
- 明日に延期
- アーカイブ
- **関連リンクを追加（新規追加）**
- **関連リンクを表示（新規追加）**
- **表示モードを切り替え（新規追加）**
- **Copilot提案を表示（新規追加）**
- **⚙️ Config（設定へジャンプ）（新規追加）**
  - タスク設定
  - 通知設定
  - ショートカット設定

関連リンクを右クリック時（新規追加）：

- リンクを開く
- 新しいタブで開く
- URLをコピー
- メモを編集
- タイプを変更
- 他のタスクに移動
- 削除
- **⚙️ Config（関連リンク設定へ）**

月次達成カードを右クリック時（新規追加）：

- 画像として保存
- Twitter/Xで共有
- Instagramストーリーで共有
- BlueSkyで共有
- URLをコピー
- 詳細統計を表示
- **⚙️ Config（月次達成設定へ）**

フローティングナビゲーターを右クリック時（新規追加）：

- 表示位置を変更
- サイズを調整
- 透明度を調整
- 看板モード切り替え
- コンテキストレベル切り替え
- **⚙️ Config（ナビゲーター設定へ）**

#### Config機能（設定ナビゲーション）（新規追加）

```typescript
interface ConfigNavigation {
  // コンテキストメニューから設定画面への ディープリンク
  navigateToSettings(section: SettingsSection): void {
    const settingsPath = {
      'task': '/settings#task-management',
      'navigation': '/settings#floating-navigator',
      'theme': '/settings#appearance',
      'gamification': '/settings#gamification',
      'links': '/settings#related-links',
      'monthly': '/settings#monthly-achievement',
      'notification': '/settings#notifications',
      'shortcuts': '/settings#keyboard-shortcuts',
      'privacy': '/settings#privacy',
      'copilot': '/settings#copilot',
      'viewMode': '/settings#view-modes',
    };

    // スムーススクロールでセクションまで移動
    router.push(settingsPath[section]);
    setTimeout(() => {
      const element = document.querySelector(`#${section}`);
      element?.scrollIntoView({ behavior: 'smooth', block: 'start' });

      // ハイライトアニメーション
      element?.classList.add('highlight-pulse');
    }, 100);
  }
}
```

## 5. レスポンシブ設計

### ブレークポイント

```css
/* Mobile First */
@media (min-width: 640px) {
  /* Tablet */
}
@media (min-width: 1024px) {
  /* Desktop */
}
@media (min-width: 1280px) {
  /* Wide */
}
```

### レイアウト適応

- **モバイル**: 単一カラム、下部ナビゲーション、関連リンクは折りたたみ表示
- **タブレット**: 2カラム、サイドバー折りたたみ可能
- **デスクトップ**: 3カラム、全機能表示、Traditional Mode利用可能

### 月次達成カードのレスポンシブ対応（新規追加）

- **モバイル**: 90vw × 80vh、垂直スクロール可能
- **タブレット**: 600px × 700px、中央配置
- **デスクトップ**: 600px × 800px、3D効果あり

### Traditional TODO Modeのレスポンシブ対応（新規追加）

- **モバイル**: タブ切り替えUI、スワイプ操作対応
- **タブレット**: 2カラム（プロジェクト + タスクリスト）、詳細はモーダル
- **デスクトップ**: 3カラム完全表示

## 6. アクセシビリティ

### WCAG 2.1 AA準拠

- コントラスト比: 最小4.5:1（通常テキスト）、3:1（大きいテキスト）
- キーボードナビゲーション完全対応
- スクリーンリーダー対応（ARIA属性）
- フォーカスインジケーター明確化
- アニメーション無効化オプション

### カラーブラインド対応

- 色だけに依存しない情報伝達
- パターンやアイコンの併用
- カラーブラインドシミュレーターでの検証

### 月次達成機能のアクセシビリティ（新規追加）

```typescript
interface AccessibilitySettings {
  // 月次達成表示
  skipMonthlyAnimation: boolean // アニメーションスキップ
  reduceParticleEffects: boolean // パーティクル削減
  simplifiedAchievementCard: boolean // シンプル表示モード

  // サウンド設定
  muteSounds: boolean
  soundVolume: number // 0-100

  // モーション設定
  prefersReducedMotion: boolean
  animationSpeed: 'normal' | 'slow' | 'instant'

  // Copilot設定（新規追加）
  copilotAnnouncements: boolean // 提案を音声で通知
  copilotHighContrast: boolean // 高コントラスト表示
  copilotFontSize: 'small' | 'medium' | 'large'
}
```

### Traditional TODO Mode専用アクセシビリティ（新規追加）

```typescript
interface TraditionalModeAccessibility {
  // チェックボックスの大きさ
  checkboxSize: 'small' | 'medium' | 'large'

  // テキストの読みやすさ
  lineHeight: 'compact' | 'normal' | 'relaxed'
  fontSize: 'small' | 'medium' | 'large' | 'xlarge'

  // フォーカス表示
  focusRingWidth: number // 1-5px
  focusRingColor: string

  // 色覚サポート
  colorBlindMode: 'none' | 'protanopia' | 'deuteranopia' | 'tritanopia'
}
```

## 7. パフォーマンス指標

### 目標値

- 初回ロード: < 3秒
- タスク切り替え: < 100ms
- 検索レスポンス: < 200ms
- アニメーション: 60fps維持
- **関連リンクプレビュー生成: < 500ms（新規追加）**
- **月次達成カード生成: < 1秒（新規追加）**
- **公開ダッシュボードロード: < 2秒（新規追加）**
- **Copilot提案表示: < 300ms（新規追加）**
- **モード切り替え: < 150ms（新規追加）**

### 最適化施策

- 遅延ロード（画像、重いコンポーネント）
- 仮想スクロール（大量タスクリスト）
- Service Workerでのキャッシュ
- WebPフォーマット使用
- **関連リンクのメタデータキャッシュ（新規追加）**
- **月次データの事前計算とキャッシュ（新規追加）**
- **公開ダッシュボードのISR（60秒）（新規追加）**
- **Copilot学習データのインデックス化（新規追加）**
- **モード別CSSの動的ロード（新規追加）**

### パフォーマンス測定（新規追加）

```typescript
interface PerformanceMetrics {
  // Core Web Vitals
  lcp: number // Largest Contentful Paint < 2.5s
  fid: number // First Input Delay < 100ms
  cls: number // Cumulative Layout Shift < 0.1

  // カスタムメトリクス
  taskSwitchTime: number
  copilotSuggestionTime: number
  modeSwitchTime: number
  linkPreviewGenerationTime: number

  // ユーザー体感速度
  perceivedLoadTime: number
  timeToInteractive: number
}
```

## 8. ログインボーナス実装詳細

### 8.1 判定ロジック

```typescript
interface LoginBonusLogic {
  // 一日の最初の判定
  isFirstLoginOfDay(): boolean {
    const lastActivity = user.lastActivityAt;
    const now = new Date();

    // 条件1: 日付が変わっている
    if (lastActivity.toDateString() !== now.toDateString()) {
      return true;
    }

    // 条件2: 4時間以上の非アクティブ後（昼休みなど）
    const hoursSinceLastActivity = (now - lastActivity) / (1000 * 60 * 60);
    if (hoursSinceLastActivity >= 4) {
      return true;
    }

    return false;
  }
}
```

### 8.2 タスク自動生成

```typescript
const loginBonusTask = {
  id: generateId(),
  title: '作業体制に入る',
  description: '今日も一日頑張りましょう！',
  type: 'SYSTEM_GENERATED',
  category: 'DAILY_ROUTINE',
  points: 30,
  status: 'COMPLETED',
  completedAt: new Date(),
  isLoginBonus: true,
  icon: '🌅',
}
```

### 8.3 連続ログインボーナス

| 連続日数 | 基本ポイント | ボーナス | 合計   |
| -------- | ------------ | -------- | ------ |
| 1-6日    | 30 XP        | 0 XP     | 30 XP  |
| 7日      | 30 XP        | +20 XP   | 50 XP  |
| 14日     | 30 XP        | +30 XP   | 60 XP  |
| 30日     | 30 XP        | +50 XP   | 80 XP  |
| 100日    | 30 XP        | +100 XP  | 130 XP |

### 8.4 時間帯別メッセージ

```typescript
const getGreetingMessage = (hour: number): string => {
  if (hour < 5) return '🌙 深夜の作業お疲れさまです'
  if (hour < 9) return '🌅 おはようございます！'
  if (hour < 12) return '☀️ 良い午前中を！'
  if (hour < 17) return '🌤️ 午後も頑張りましょう'
  if (hour < 21) return '🌆 お疲れさまです'
  return '🌛 遅くまでお疲れさまです'
}
```

### 8.5 設定オプション

```typescript
interface LoginBonusSettings {
  enabled: boolean // ログインボーナス有効/無効
  showAnimation: boolean // アニメーション表示
  playSound: boolean // サウンド再生
  autoCloseModal: boolean // モーダル自動クローズ
  autoCloseDelay: number // 自動クローズまでの秒数（3-10秒）
  customMessage: string // カスタムメッセージ（Pro機能）
}
```

## 9. オンボーディング設計（新規追加）

### 9.1 オンボーディングフロー

```typescript
interface OnboardingFlow {
  steps: OnboardingStep[]
  currentStep: number
  skippable: boolean
  completionReward: number // 50 XP
}

interface OnboardingStep {
  id: string
  title: string
  description: string
  interactive: boolean
  requiredAction?: string
  focusElement?: string
}
```

### 9.2 オンボーディングステップ

1. **ウェルカム**: TaskNavの基本コンセプト紹介
2. **ナビゲーター体験**: フローティングUIの操作
3. **必須ショートカット**: Cmd+N、Cmd+→、Cmd+T、Cmd+Lの練習
4. **テキストエディタ**: 自動TODO抽出のデモ
5. **ゲーミフィケーション**: XPとレベルシステムの説明
6. **カスタマイズ**: 表示位置と透明度の設定
7. **表示モード選択**: ゲーミフィケーション vs Traditional Mode
8. **Copilot体験**: 入力補完の実演

### 9.3 インタラクティブチュートリアル

```typescript
const interactiveTutorial = {
  shortcutPractice: {
    target: 'Cmd+N',
    instruction: 'ナビゲーターを表示/非表示してみましょう',
    successCondition: 'navigator.toggled',
    reward: 10, // XP
  },
  firstTaskCreation: {
    target: 'editor',
    instruction: '"買い物に行く"と入力してみてください',
    successCondition: 'task.autoExtracted',
    reward: 20, // XP
  },
  firstLinkAddition: {
    target: 'Cmd+L',
    instruction: '関連リンクを追加してみましょう',
    successCondition: 'link.added',
    reward: 15, // XP
  },
  modeSwitching: {
    target: 'Cmd+Shift+M',
    instruction: 'Traditional Modeに切り替えてみましょう',
    successCondition: 'mode.switched',
    reward: 10, // XP
  },
  copilotExperience: {
    target: 'input',
    instruction: '"PRD"と入力してTabキーで補完を受け入れてください',
    successCondition: 'copilot.accepted',
    reward: 15, // XP
  },
}
```

## 10. 合法休養システム（新規追加）

### 10.1 休養タスク生成ルール

```typescript
interface LegalRestSystem {
  streakThresholds: {
    7: RestTask // 半日休養
    14: RestTask // 完全休養日
    30: RestTask // リフレッシュ休暇
  }

  maxAccumulated: 5
  expirationDays: 30
}

interface RestTask {
  type: 'HALF_DAY' | 'FULL_DAY' | 'REFRESH_VACATION'
  title: string
  description: string
  xpMultiplier: 3
  hoursEquivalent: number
  icon: string
}
```

### 10.2 休養タスクUI

```
┌────────────────────────────────┐
│      🌴 合法休養を獲得しました！     │
│                                    │
│    7日間連続で作業を続けたご褒美に   │
│      「半日休養」タスクを付与！      │
│                                    │
│    いつでも使用可能（30日間有効）    │
│                                    │
│         [後で確認] [今使う]         │
└────────────────────────────────┘
```

### 10.3 休養タスク管理

```typescript
const restTaskTemplates = {
  HALF_DAY: {
    title: '半日休養 🌤️',
    description: '4時間分の作業に相当する休養を取りましょう',
    xpReward: 150,
    icon: '🌤️',
  },
  FULL_DAY: {
    title: '完全休養日 🏖️',
    description: '今日は完全にオフ！8時間分の価値があります',
    xpReward: 300,
    icon: '🏖️',
  },
  REFRESH_VACATION: {
    title: 'リフレッシュ休暇 🌴',
    description: '24時間分の大型休暇です。しっかり休んでください！',
    xpReward: 600,
    icon: '🌴',
  },
}
```

## 11. 関連リンク機能詳細（新規追加）

### 11.1 関連性判定アルゴリズム

```typescript
interface RelevanceScoring {
  calculateScore(currentTask: Task, pageContent: PageContent): number {
    const scores = {
      titleMatch: this.calculateTitleMatch(currentTask.title, pageContent.title),
      contentMatch: this.calculateContentMatch(currentTask.description, pageContent.text),
      tagMatch: this.calculateTagMatch(currentTask.tags, pageContent.keywords),
      domainAuthority: this.getDomainScore(pageContent.domain)
    };

    return (
      scores.titleMatch * 0.3 +
      scores.contentMatch * 0.4 +
      scores.tagMatch * 0.2 +
      scores.domainAuthority * 0.1
    );
  }
}
```

### 11.2 関連リンクプレビュー生成

```typescript
interface LinkPreview {
  url: string
  title: string
  description: string
  thumbnail?: string
  favicon: string
  siteName: string
  publishedDate?: Date
  readingTime?: number // 推定読了時間（分）
}

// Open Graph / Twitter Cardメタデータ取得
async function generateLinkPreview(url: string): Promise<LinkPreview> {
  const metadata = await fetchMetadata(url)
  return {
    url,
    title: metadata.ogTitle || metadata.title,
    description: metadata.ogDescription || metadata.description,
    thumbnail: metadata.ogImage,
    favicon: metadata.favicon,
    siteName: metadata.ogSiteName,
    publishedDate: metadata.articlePublishedTime,
    readingTime: estimateReadingTime(metadata.contentLength),
  }
}
```

### 11.3 関連リンクAPIエンドポイント

```typescript
// 関連リンク追加
POST /api/tasks/{taskId}/links
{
  url: string;
  type: 'reference' | 'solution' | 'related' | 'tool' | 'documentation';
  memo?: string;
  importance: 'high' | 'medium' | 'low';
  selectedText?: string;
}

// 関連リンク一覧取得
GET /api/tasks/{taskId}/links

// 関連リンク更新
PUT /api/tasks/{taskId}/links/{linkId}

// 関連リンク削除
DELETE /api/tasks/{taskId}/links/{linkId}

// 関連性スコア計算
POST /api/tasks/{taskId}/links/calculate-relevance
{
  url: string;
}
```

### 11.4 Chrome Extension連携詳細

```javascript
// Chrome Extension Background Script
chrome.tabs.onUpdated.addListener(async (tabId, changeInfo, tab) => {
  if (changeInfo.status === 'complete') {
    const currentTask = await getCurrentTask()

    if (currentTask && currentTask.status === 'In Progress') {
      const relevanceScore = await calculateRelevance(
        currentTask,
        tab.url,
        tab.title,
      )

      if (relevanceScore >= 70) {
        chrome.action.setBadgeText({ text: '!', tabId })
        chrome.action.setBadgeBackgroundColor({ color: '#10b981', tabId })
      }
    }
  }
})

// Content Script
chrome.runtime.onMessage.addListener((request, sender, sendResponse) => {
  if (request.action === 'getSelectedText') {
    const selectedText = window.getSelection().toString()
    sendResponse({ selectedText })
  }
})
```

### 11.5 関連リンク分析レポート

```typescript
interface LinkAnalytics {
  totalLinksAdded: number
  linksByType: Record<LinkType, number>
  mostAccessedLinks: Array<{
    link: RelatedLink
    accessCount: number
  }>
  averageLinksPerTask: number
  linkUtilizationRate: number // クリック率
  topDomains: Array<{
    domain: string
    count: number
  }>
}

// 週次/月次レポートに含める
const generateLinkInsights = (analytics: LinkAnalytics): string => {
  return `
## 関連リンク活用状況
- 今週追加したリンク: ${analytics.totalLinksAdded}個
- 最も参照されたリンク: ${analytics.mostAccessedLinks[0].link.title}
- 平均リンク活用率: ${analytics.linkUtilizationRate}%

### 改善提案
${
  analytics.linkUtilizationRate < 50
    ? '追加したリンクの活用率が低いです。本当に必要なリンクのみを厳選しましょう。'
    : 'リンクを効果的に活用できています。この調子で継続しましょう。'
}
  `
}
```

## 12. Copilot機能実装詳細（新規追加）

### 12.1 予測エンジンアーキテクチャ

```typescript
interface CopilotEngine {
  // 予測ソース
  sources: {
    history: HistoryBasedPredictor;      // 過去の入力履歴
    context: ContextBasedPredictor;      // 現在のプロジェクト/BigEpic
    patterns: PatternBasedPredictor;     // よく使うパターン
    temporal: TemporalBasedPredictor;    // 時間帯/曜日
    ai: AIBasedPredictor;                // LLMベース予測
  };

  // 統合アルゴリズム
  combinePreictions(predictions: Prediction[]): CopilotSuggestion[] {
    // 信頼度スコアでソート
    const sorted = predictions.sort((a, b) => b.confidence - a.confidence);

    // 重複除去
    const unique = this.removeDuplicates(sorted);

    // 上位5件を返す
    return unique.slice(0, 5);
  }
}
```

### 12.2 学習システム

```typescript
interface LearningSystem {
  // ローカル学習
  localLearning: {
    storage: IndexedDB
    maxEntries: 10000

    learn(input: string, accepted: boolean): void
    forget(pattern: string): void
    export(): LearningData
    import(data: LearningData): void
  }

  // プライバシー保護
  privacy: {
    anonymize(text: string): string
    maskSensitiveData(text: string): string
    excludePatterns: string[]

    // GDPR/CCPA準拠
    deleteAllData(): Promise<void>
    exportUserData(): Promise<Blob>
  }

  // パフォーマンス最適化
  performance: {
    debounceTime: 200 // ms
    cacheSize: 100 // 予測キャッシュ
    indexingInterval: 3600000 // 1時間ごとに再インデックス
  }
}
```

### 12.3 UIインタラクション

```typescript
interface CopilotUI {
  // 表示制御
  display: {
    showSuggestion(text: string, confidence: number): void
    hideSuggestion(): void
    animateFadeIn(): void
    animateFadeOut(): void
  }

  // ユーザー操作
  interactions: {
    onTab(): void // 提案を受け入れ
    onEnter(): void // 提案を受け入れ（オプション）
    onEscape(): void // 提案を却下
    onArrowUp(): void // 前の候補
    onArrowDown(): void // 次の候補
  }

  // ビジュアルフィードバック
  feedback: {
    showAcceptAnimation(): void
    showRejectAnimation(): void
    showLoadingIndicator(): void
    showErrorState(): void
  }
}
```

### 12.4 コンテキスト理解

```typescript
interface ContextUnderstanding {
  // プロジェクトコンテキスト
  projectContext: {
    currentProject: string
    recentTasks: Task[]
    commonTerms: string[]
    projectSpecificVocabulary: Map<string, number>
  }

  // 時間的コンテキスト
  temporalContext: {
    timeOfDay: 'morning' | 'afternoon' | 'evening' | 'night'
    dayOfWeek: string
    isWeekend: boolean
    isHoliday: boolean

    // パターン検出
    detectPattern(history: InputHistory[]): Pattern | null
  }

  // ユーザー習慣
  userHabits: {
    commonPhrases: string[]
    writingStyle: 'formal' | 'casual' | 'technical'
    averageTaskLength: number
    preferredKeywords: string[]
  }
}
```

## 13. Traditional TODO Mode実装詳細（新規追加）

### 13.1 レイアウト定義

```typescript
interface TraditionalLayout {
  // カラム構成
  columns: {
    left: {
      width: '240px'
      content: 'ProjectNavigation'
      collapsible: true
    }
    center: {
      width: 'flex'
      content: 'TaskList'
      minWidth: '400px'
    }
    right: {
      width: '360px'
      content: 'TaskDetails'
      collapsible: true
    }
  }

  // スタイル設定
  theme: {
    usesSystemTheme: boolean
    colorScheme: 'light' | 'dark' | 'auto'
    fontFamily: 'system'
    borderRadius: '4px'
  }

  // 機能制限
  hiddenFeatures: [
    'gamification',
    'achievements',
    'xpBar',
    'levelDisplay',
    'githubGrass',
    'celebrationEffects',
  ]
}
```

### 13.2 タスクリストコンポーネント

```typescript
interface TraditionalTaskList {
  // 表示形式
  displayMode: 'list' | 'kanban' | 'calendar'

  // ソート設定
  sortBy: 'dueDate' | 'priority' | 'created' | 'manual'
  groupBy: 'status' | 'project' | 'date' | 'none'

  // フィルター
  filters: {
    status: TaskStatus[]
    projects: string[]
    tags: string[]
    dateRange: DateRange
  }

  // レイアウト
  layout: {
    columns: number // 1-3
    compactMode: boolean
    showCheckboxes: boolean
    showDueDates: boolean
    showTags: boolean
  }

  // インタラクション
  interactions: {
    checkboxToggle: boolean
    inlineEdit: boolean
    dragAndDrop: boolean
    contextMenu: boolean
    multiSelect: boolean
  }
}
```

### 13.3 モード切り替えロジック

```typescript
class ViewModeManager {
  private currentMode: ViewMode = 'gamified'
  private transitions = new Map<string, TransitionConfig>()

  async switchMode(newMode: ViewMode): Promise<void> {
    // 現在の状態を保存
    await this.saveCurrentState()

    // トランジション開始
    await this.startTransition(this.currentMode, newMode)

    // UIコンポーネントを切り替え
    await this.swapComponents(newMode)

    // 新しいモードの設定を適用
    await this.applyModeSettings(newMode)

    // トランジション完了
    await this.completeTransition()

    this.currentMode = newMode
    this.notifyModeChange(newMode)
  }

  private async swapComponents(mode: ViewMode): Promise<void> {
    if (mode === 'traditional') {
      // ゲーミフィケーション要素を非表示
      await this.hideGamificationElements()
      // Traditional UIをロード
      await this.loadTraditionalComponents()
    } else {
      // Traditional UIを非表示
      await this.hideTraditionalElements()
      // ゲーミフィケーション要素を表示
      await this.showGamificationElements()
    }
  }
}
```

## 14. セキュリティとプライバシー

### 14.1 データ暗号化

```typescript
interface SecurityMeasures {
  // 暗号化
  encryption: {
    algorithm: 'AES-256-GCM'
    keyDerivation: 'PBKDF2'
    saltRounds: 100000
  }

  // 通信セキュリティ
  transport: {
    protocol: 'HTTPS'
    tlsVersion: '1.3'
    certificatePinning: boolean
  }

  // 認証
  authentication: {
    method: 'JWT'
    tokenExpiry: 3600 // 1時間
    refreshTokenExpiry: 604800 // 7日間
    mfa: boolean // 多要素認証
  }
}
```

### 14.2 プライバシーコントロール

```typescript
interface PrivacyControls {
  // データ収集設定
  dataCollection: {
    analytics: boolean
    crashReports: boolean
    usageStatistics: boolean
    copilotLearning: boolean
  }

  // データ保持
  dataRetention: {
    taskHistory: 365 // days
    activityLogs: 90
    copilotHistory: 30
    deletedItems: 30
  }

  // エクスポート/削除
  userRights: {
    exportData(): Promise<UserDataExport>
    deleteAccount(): Promise<void>
    pauseDataCollection(): void
    requestDataReview(): Promise<DataReview>
  }
}
```

## 15. 技術スタック詳細

### 15.1 フロントエンド

```typescript
const frontendStack = {
  framework: 'Next.js 14',
  ui: {
    library: 'React 18',
    styling: 'Tailwind CSS + CSS Modules',
    animations: 'Framer Motion',
    components: 'Radix UI + Shadcn/ui',
  },
  state: {
    global: 'Zustand',
    server: 'TanStack Query',
    forms: 'React Hook Form + Zod',
  },
  testing: {
    unit: 'Vitest',
    integration: 'Testing Library',
    e2e: 'Playwright',
  },
}
```

### 15.2 バックエンド

```typescript
const backendStack = {
  runtime: 'Node.js 20 LTS',
  framework: 'Next.js API Routes',
  database: {
    primary: 'PostgreSQL (Neon)',
    cache: 'Redis (Upstash)',
    search: 'PostgreSQL Full Text Search',
  },
  orm: 'Prisma 5',
  api: {
    rest: 'Next.js API Routes',
    rpc: 'tRPC',
    realtime: 'Pusher / Ably',
  },
  auth: 'Clerk',
  monitoring: {
    apm: 'Datadog / New Relic',
    logging: 'Winston + LogDNA',
    errors: 'Sentry',
  },
}
```

### 15.3 デスクトップ/モバイル

```typescript
const multiPlatformStack = {
  desktop: {
    framework: 'Electron 28 / Tauri 2.0',
    updater: 'electron-updater',
    signing: 'electron-builder',
  },
  mobile: {
    framework: 'React Native + Expo',
    navigation: 'React Navigation 6',
    storage: 'MMKV',
    notifications: 'Expo Notifications',
  },
  extension: {
    manifest: 'v3',
    framework: 'Plasmo',
    storage: 'chrome.storage.local',
  },
}
```

## 16. デプロイメントと運用

### 16.1 インフラストラクチャ

```yaml
infrastructure:
  hosting:
    web: Vercel
    api: Vercel Functions
    database: Neon (PostgreSQL)
    cache: Upstash (Redis)
    storage: Cloudflare R2 / AWS S3

  cdn:
    provider: Cloudflare
    locations: Global
    caching:
      static: 31536000 # 1年
      api: 300 # 5分

  scaling:
    auto: true
    minInstances: 2
    maxInstances: 100
    targetCPU: 70%
```

### 16.2 CI/CDパイプライン

```yaml
pipeline:
  triggers:
    - push to main
    - pull request
    - scheduled (daily)

  stages:
    - lint:
        tools: [ESLint, Prettier, TypeScript]
    - test:
        unit: Vitest
        integration: Testing Library
        e2e: Playwright
    - build:
        environments: [staging, production]
    - deploy:
        preview: Vercel Preview
        production: Vercel Production
    - monitor:
        healthcheck: 5min interval
        alerts: Slack / Discord
```

## 17. ビジネスモデルと収益化

### 17.1 価格設定

```typescript
const pricingPlans = {
  free: {
    price: 0,
    features: [
      '5プロジェクト',
      '基本機能',
      'Chrome Extension',
      '基本テーマ',
      'Traditional TODO Mode',
    ],
    limitations: {
      tasksPerMonth: 500,
      relatedLinksPerTask: 3,
      copilotSuggestions: 100,
    },
  },

  pro: {
    price: 3, // USD/月
    features: [
      '無制限プロジェクト',
      '全機能アクセス',
      'AI機能フル活用',
      '100+プレミアムテーマ',
      '公開ダッシュボード',
      'Copilot無制限',
      '優先サポート',
    ],
    limitations: null,
  },

  team: {
    price: 8, // USD/ユーザー/月
    features: [
      'Pro全機能',
      'チーム共有',
      '管理者機能',
      'SSO対応',
      'API アクセス',
      'SLA保証',
    ],
  },
}
```

### 17.2 収益化戦略

```typescript
const monetizationStrategy = {
  // コンバージョン目標
  targets: {
    freeToProConversion: 0.08, // 8%
    monthlyChurn: 0.05, // 5%
    ltv: 54, // $54 (18ヶ月)
    cac: 12, // $12
  },

  // 成長施策
  growth: {
    referralProgram: {
      reward: '1ヶ月無料',
      threshold: 3, // 3人紹介
    },
    studentDiscount: 0.5, // 50% off
    annualDiscount: 0.167, // 年払いで2ヶ月分お得
  },

  // アップセル戦略
  upsell: {
    triggers: ['プロジェクト上限到達', 'Copilot使用制限', 'テーマ選択制限'],
    timing: 'contextual',
    messaging: 'value_based',
  },
}
```

## 18. 成功指標（KPI）

### 18.1 プロダクトメトリクス

```typescript
const productMetrics = {
  engagement: {
    dau_mau: 0.6, // 目標: 60%
    avgSessionLength: 25, // 分
    tasksPerUser: 8, // 日次
    retentionD7: 0.4, // 40%
    retentionD30: 0.25, // 25%
  },

  feature_adoption: {
    copilotUsage: 0.7, // 70%のユーザー
    relatedLinksAdded: 5, // タスクあたり
    modeSwitch: 0.3, // 30%がモード切替
    publicDashboard: 0.2, // 20%が公開
  },

  satisfaction: {
    nps: 50, // Net Promoter Score
    csat: 4.2, // /5
    supportTickets: 0.02, // per user/month
    featureRequests: 100, // monthly
  },
}
```

### 18.2 ビジネスメトリクス

```typescript
const businessMetrics = {
  revenue: {
    mrr: 10000, // Monthly Recurring Revenue
    arr: 120000, // Annual Recurring Revenue
    arpu: 3, // Average Revenue Per User
    growth: 0.15, // 月次15%成長
  },

  costs: {
    infrastructure: 0.5, // $/user
    support: 0.3, // $/user
    development: 50000, // monthly fixed
    marketing: 0.2, // CAC ratio
  },

  profitability: {
    grossMargin: 0.85, // 85%
    burnRate: 30000, // monthly
    runway: 18, // months
    breakevenUsers: 20000, // ユーザー数
  },
}
```

## 19. 今後のロードマップ

### Phase 1: MVP強化（0-3ヶ月）

- ✅ Traditional TODO Mode実装
- ✅ Copilot基本機能
- ✅ 関連リンク機能
- ⏳ パフォーマンス最適化
- ⏳ バグ修正と安定化

### Phase 2: 機能拡張（3-6ヶ月）

- 📅 チーム機能ベータ版
- 📅 API公開
- 📅 サードパーティ統合（Slack, Notion）
- 📅 高度なAI機能
- 📅 モバイルアプリ正式版

### Phase 3: スケール（6-12ヶ月）

- 🔮 エンタープライズ機能
- 🔮 国際化（10言語）
- 🔮 プラグインエコシステム
- 🔮 AIアシスタント強化
- 🔮 ブロックチェーン統合（NFT達成バッジ）

## 20. まとめ

**Corelive（TaskNav）** は、従来のタスク管理の枠を超えて、**ゲーミフィケーション**と**AI**、そして**柔軟な表示モード**を組み合わせることで、ユーザーの生産性と継続性を最大化する次世代タスクナビゲーションシステムです。

### 主要な競合優位性

1. 🎮 **適応型UI**: ゲーミフィケーションモードとTraditional TODO Modeを瞬時に切り替え可能
2. 🤖 **インテリジェント支援**: Copilot機能による文脈を理解した入力補完
3. 🔗 **知識管理統合**: 関連リンク機能による参考資料の体系的管理
4. 🏆 **モチベーション維持**: 合法休養システムと月次達成セレブレーション
5. 📊 **透明性**: 公開ダッシュボードによる進捗共有

### 差別化要因

- **Notion** より簡単に始められて
- **Todoist** より楽しく続けられて
- **Jira** より柔軟に使えて
- **GitHub Copilot** より タスク管理に特化した予測を提供

月額**3ドル**という競争力のある価格設定により、個人開発者からプロフェッショナルまで、幅広いユーザー層に価値を提供します。

---

**Document Version**: 2.0
**Last Updated**: 2025年1月
**Total Features**: 120+
**Estimated Development Time**: 6-9 months
**Target Launch**: 2025 Q2
