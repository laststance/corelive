/**
 * CoreLive Design System - Micro Interactions
 * 
 * Small animations for UI feedback and delight
 */

@layer base {
  /* Button interactions */
  .button-ripple {
    position: relative;
    overflow: hidden;
  }

  .button-ripple::before {
    content: '';
    position: absolute;
    top: 50%;
    left: 50%;
    width: 0;
    height: 0;
    border-radius: 50%;
    background: currentColor;
    opacity: 0.2;
    transform: translate(-50%, -50%);
    transition:
      width var(--duration-slow) var(--ease-out),
      height var(--duration-slow) var(--ease-out),
      opacity var(--duration-slow) var(--ease-out);
  }

  .button-ripple:active::before {
    width: 300px;
    height: 300px;
    opacity: 0;
  }

  /* Pulse effect for attention */
  .pulse {
    animation: pulse calc(var(--duration-normal) * 2) var(--ease-in-out)
      infinite;
  }

  .pulse-once {
    animation: pulseOnce var(--duration-normal) var(--ease-out);
  }

  @keyframes pulse {
    0%,
    100% {
      transform: scale(1);
      opacity: 1;
    }
    50% {
      transform: scale(1.05);
      opacity: 0.8;
    }
  }

  @keyframes pulseOnce {
    0% {
      transform: scale(1);
    }
    50% {
      transform: scale(1.1);
    }
    100% {
      transform: scale(1);
    }
  }

  /* Shake effect for errors */
  .shake {
    animation: shake var(--duration-fast) var(--ease-out);
  }

  @keyframes shake {
    0%,
    100% {
      transform: translateX(0);
    }
    10%,
    30%,
    50%,
    70%,
    90% {
      transform: translateX(-4px);
    }
    20%,
    40%,
    60%,
    80% {
      transform: translateX(4px);
    }
  }

  /* Bounce effect */
  .bounce {
    animation: bounce var(--duration-normal) var(--ease-bounce);
  }

  @keyframes bounce {
    0%,
    100% {
      transform: translateY(0);
    }
    40% {
      transform: translateY(-10px);
    }
    60% {
      transform: translateY(-5px);
    }
  }

  /* Checkbox check animation */
  .checkbox-check {
    stroke-dasharray: 16;
    stroke-dashoffset: 16;
    animation: checkboxCheck var(--duration-fast) var(--ease-out) forwards;
  }

  @keyframes checkboxCheck {
    to {
      stroke-dashoffset: 0;
    }
  }

  /* Radio select animation */
  .radio-select {
    transform: scale(0);
    animation: radioSelect var(--duration-fast) var(--ease-bounce) forwards;
  }

  @keyframes radioSelect {
    0% {
      transform: scale(0);
    }
    50% {
      transform: scale(1.2);
    }
    100% {
      transform: scale(1);
    }
  }

  /* Switch toggle animation */
  .switch-toggle {
    transition:
      transform var(--duration-fast) var(--ease-smooth),
      background-color var(--duration-fast) var(--ease-smooth);
  }

  /* Input focus effect */
  .input-focus {
    transition:
      border-color var(--duration-fast) var(--ease-smooth),
      box-shadow var(--duration-fast) var(--ease-smooth);
  }

  .input-focus:focus {
    animation: inputFocusPulse calc(var(--duration-fast) * 2) var(--ease-out);
  }

  @keyframes inputFocusPulse {
    0% {
      box-shadow: 0 0 0 0 var(--color-ring);
    }
    100% {
      box-shadow: 0 0 0 4px var(--color-ring) / 0%;
    }
  }

  /* Card hover lift */
  .card-lift {
    transition:
      transform var(--duration-fast) var(--ease-smooth),
      box-shadow var(--duration-fast) var(--ease-smooth);
  }

  .card-lift:hover {
    transform: translateY(-2px);
  }

  /* Icon spin on hover */
  .icon-spin-hover {
    transition: transform var(--duration-normal) var(--ease-smooth);
  }

  .icon-spin-hover:hover {
    transform: rotate(180deg);
  }

  /* Success checkmark animation */
  .success-check {
    stroke-dasharray: 100;
    stroke-dashoffset: 100;
    animation: successCheck var(--duration-normal) var(--ease-out) forwards;
  }

  @keyframes successCheck {
    to {
      stroke-dashoffset: 0;
    }
  }

  /* Loading dots */
  .loading-dots {
    display: inline-flex;
    gap: 4px;
  }

  .loading-dot {
    width: 8px;
    height: 8px;
    background: currentColor;
    border-radius: 50%;
    animation: loadingDot calc(var(--duration-normal) * 3) var(--ease-in-out)
      infinite;
  }

  .loading-dot:nth-child(2) {
    animation-delay: calc(var(--duration-fast) / 2);
  }

  .loading-dot:nth-child(3) {
    animation-delay: var(--duration-fast);
  }

  @keyframes loadingDot {
    0%,
    80%,
    100% {
      opacity: 0.4;
      transform: scale(0.8);
    }
    40% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Skeleton loading pulse */
  .skeleton {
    position: relative;
    background: var(--color-muted);
    overflow: hidden;
  }

  .skeleton::after {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background: linear-gradient(
      90deg,
      transparent,
      var(--color-muted-foreground) / 10%,
      transparent
    );
    transform: translateX(-100%);
    animation: skeleton calc(var(--duration-slow) * 2) var(--ease-in-out)
      infinite;
  }

  @keyframes skeleton {
    100% {
      transform: translateX(100%);
    }
  }

  /* Tooltip fade in */
  .tooltip {
    opacity: 0;
    transform: translateY(-4px);
    transition:
      opacity var(--duration-fast) var(--ease-out),
      transform var(--duration-fast) var(--ease-out);
  }

  .tooltip-visible {
    opacity: 1;
    transform: translateY(0);
  }

  /* Menu slide down */
  .menu-slide {
    transform-origin: top;
    animation: menuSlide var(--duration-fast) var(--ease-out) forwards;
  }

  @keyframes menuSlide {
    0% {
      opacity: 0;
      transform: scaleY(0.95) translateY(-4px);
    }
    100% {
      opacity: 1;
      transform: scaleY(1) translateY(0);
    }
  }

  /* Notification slide in */
  .notification-slide {
    animation: notificationSlide var(--duration-normal) var(--ease-out) forwards;
  }

  @keyframes notificationSlide {
    0% {
      opacity: 0;
      transform: translateX(100%);
    }
    100% {
      opacity: 1;
      transform: translateX(0);
    }
  }

  /* Focus ring animation */
  .focus-ring {
    outline: none;
    position: relative;
  }

  .focus-ring:focus-visible::after {
    content: '';
    position: absolute;
    inset: -2px;
    border: 2px solid var(--color-ring);
    border-radius: inherit;
    opacity: 0;
    animation: focusRing var(--duration-fast) var(--ease-out) forwards;
  }

  @keyframes focusRing {
    0% {
      opacity: 0;
      transform: scale(0.95);
    }
    100% {
      opacity: 1;
      transform: scale(1);
    }
  }

  /* Hover scale */
  .hover-scale {
    transition: transform var(--duration-fast) var(--ease-smooth);
  }

  .hover-scale:hover {
    transform: scale(1.05);
  }

  /* Pressed scale */
  .pressed-scale {
    transition: transform var(--duration-fast) var(--ease-smooth);
  }

  .pressed-scale:active {
    transform: scale(0.95);
  }

  /* Fade transitions */
  .fade-enter {
    opacity: 0;
    animation: fadeIn var(--duration-fast) var(--ease-out) forwards;
  }

  .fade-exit {
    opacity: 1;
    animation: fadeOut var(--duration-fast) var(--ease-in) forwards;
  }

  /* Slide transitions */
  .slide-enter-right {
    transform: translateX(20px);
    opacity: 0;
    animation: slideInRight var(--duration-fast) var(--ease-out) forwards;
  }

  @keyframes slideInRight {
    to {
      transform: translateX(0);
      opacity: 1;
    }
  }

  /* Theme-specific micro interactions */
  [data-theme^='retro'] {
    .button-ripple:active {
      transform: translate(2px, 2px);
    }

    .card-lift:hover {
      transform: translate(-2px, -2px);
    }
  }

  [data-theme^='gradient'] {
    .hover-scale:hover {
      background-position: 100% 0;
      background-size: 200% 100%;
    }
  }

  /* Reduced motion support */
  @media (prefers-reduced-motion: reduce) {
    *,
    *::before,
    *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }

    .card-lift:hover,
    .hover-scale:hover,
    .pressed-scale:active,
    .icon-spin-hover:hover {
      transform: none;
    }
  }
}
